<%- include("./partials/header.ejs") %>
<title>Pantry</title>
<%- include("./partials/navbar.ejs") %>
<!-------------------------------------------------- ENTER CONTENT HERE -------------------------------------------------->
<section class="pantry-page-cont">
    <div class="overlay"></div>
    <section class="container pantry-menu-cont page p-0 overflow-auto">
        <%- include('./partials/flash') %>
        <% for (cat of categories) { %>
            <section class="<%=cat.toLowerCase()%>-section pantry-category">
                <div class="category-col category-row d-flex justify-content-center align-items-center"><%= cat in twoWordCats ? twoWordCats[cat] : cat %><img src="https://res.cloudinary.com/meal-creator/image/upload/v1662276054/icons/<%=cat.toLowerCase()%>.png" class="category-icon"></div>
                <div class="category-row justify-content-start d-flex align-items-center p-0">
                    <form action="/pantry/<%=cat%>" method="post" class="form-container">
                        <button type="submit" disabled style="display: none" aria-hidden="true"></button>
                        <input type="text" name="name" placeholder="Add Item" class="search-category">
                        <button type="submit" id="new-item-pantry-btn" class="btn btn-light add-button add-pantry-button d-flex justify-content-center align-items-center p-0"></button>
                    </form>        
                </div>
                <% for (let item of items) { %>
                    <% if (item.category === cat && cat !== "Saved Items" && item.inStock) { %>
                        <div class="row list-item-bar m-0" title="<%=cat.toLowerCase()%>-section pantry-category">
                            <form class="d-flex form-container" action="/pantry/move/<%=item.name%>" method="post">
                                <div class="col-sm-1 d-flex justify-content-begin align-items-center p-0 check-col">
                                    <input type="image" class="btn btn-light list-check" value="">
                                </div>
                            </form>
                            <form class="d-flex form-container" action="/pantry/<%=item._id%>?_method=PATCH" method="post">
                                <button type="submit" disabled style="display: none" aria-hidden="true"></button>
                                <div class="col-11 p-0 pantry-input-field">
                                    <input type="text" name="name" class="item-edit" value="<%= item.name %>" placeholder="<%= item.name %>">
                                </div>
                                <div class="col-1 d-flex justify-content-start align-items-center p-0">
                                    <input type="submit" id="pantry-enter-btn" class="btn btn-light enter-btn" value="">
                                </div>
                            </form>
                            <form class="form-container" action="/pantry/<%=item._id%>?_method=DELETE" method="post">
                                <div class="col-sm-1 d-flex justify-content-begin align-items-center p-0">
                                    <input type="submit" class="btn btn-light trash-btn" value="">
                                </div>
                            </form>
                        </div>
                    <% } else if (cat === "Saved Items" && !item.inStock) { %>
                        <div class="row list-item-bar m-0" title="saved items-section pantry-category">
                            <form class="d-flex form-container" action="/pantry/move-back/<%=item.name%>" method="post">
                                <div class="col-sm-1 d-flex justify-content-begin align-items-center p-0 check-col">
                                    <input type="image" class="btn btn-light list-uncheck" value="">
                                </div>
                            </form>
                            <form class="d-flex form-container" action="/pantry/<%=item._id%>?_method=PATCH" method="post">
                                <button type="submit" disabled style="display: none" aria-hidden="true"></button>
                                <div class="col-sm-10 p-0 pantry-input-field">
                                    <input type="text" name="name" id="saved-item-edit" class="item-edit" value="<%= item.name %>" placeholder="<%= item.name %>">
                                </div>
                                <div class="col-sm-1 d-flex justify-content-end align-items-center p-0">
                                    <input type="submit" id="pantry-enter-btn" class="btn btn-light enter-btn-saved" value="">
                                </div>
                            </form>
                            <form class="form-container" action="/pantry/<%=item._id%>?_method=DELETE" method="post">
                                <div class="col-sm-1 d-flex justify-content-center align-items-center p-0">
                                    <input type="submit" class="btn btn-light trash-btn-saved" value="">
                                </div>
                            </form>
                            <form class="form-container" action="/pantry/move-to-cart/<%=item.name%>" method="post">
                                <div class="col-sm-1 d-flex align-items-center p-0">
                                    <input type="submit" class="btn btn-light cart-btn" value="">
                                </div>
                            </form>
                        </div>
                    <%}%>
                <% } %>
            </section>
        <% } %>
    </section>
</section>
<!--------------------------------------------------- CONTENT ENDS HERE --------------------------------------------------> 
<%- include("./partials/scripts.ejs") %>
<script src="/js/pantry.js"></script>
<%- include("./partials/footer.ejs") %>